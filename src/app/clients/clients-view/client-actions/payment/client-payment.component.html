<div class="profile-image-container">

  <mat-card>

    <form [formGroup]="clientPaymentForm" (ngSubmit)="submit()">

      <mat-card-content>

        <div mat-header-cell>Loan Accounts</div>
        <table *ngIf="!showClosedLoanAccounts" mat-table [dataSource]="loanAccounts|accountsFilter:'loan'">
          <ng-container matColumnDef="Account No">
            <th mat-header-cell *matHeaderCellDef> Account No. </th>
            <td mat-cell *matCellDef="let element"> <i class="fa fa-stop"
                                                       [ngClass]="element.inArrears?'status-active-overdue':(element.status.code|statusLookup)"></i>
              {{element.accountNo}}
            </td>
          </ng-container>

          <ng-container matColumnDef="Loan Account">
            <th mat-header-cell *matHeaderCellDef> Loan Account </th>
            <td mat-cell *matCellDef="let element"> {{element.productName}} </td>
          </ng-container>

          <ng-container matColumnDef="Original Loan">
            <th mat-header-cell *matHeaderCellDef> Original Loan </th>
            <td mat-cell *matCellDef="let element"> {{element.originalLoan}} </td>
          </ng-container>
          <ng-container matColumnDef="Loan Balance">
            <th mat-header-cell *matHeaderCellDef>Loan Balance </th>
            <td mat-cell *matCellDef="let element"> {{element.loanBalance}} </td>
          </ng-container>

          <ng-container matColumnDef="Amount Paid">
            <th mat-header-cell *matHeaderCellDef> Amount Paid </th>
            <td mat-cell *matCellDef="let element"> {{element.amountPaid}} </td>
          </ng-container>

          <ng-container matColumnDef="Type">
            <th mat-header-cell *matHeaderCellDef> Type </th>
            <td mat-cell *matCellDef="let element">
              <i class="fa fa-large" [ngClass]="(element.loanType.value=== 'Individual')?'fa-user':'fa-group'" matTooltip=" {{ element.loanType.value }}" matTooltipPosition="above"></i>
            </td>
          </ng-container>

          <ng-container matColumnDef="Repayment Amount">
            <th mat-header-cell *matHeaderCellDef> Repayment Amount </th>
            <td mat-cell *matCellDef="let element">
            <mat-form-field *ngIf="clientPaymentForm.contains('repaymentAmount')">
              <input matInput formControlName="repaymentAmount" (change)="updateAmounts()">
            </mat-form-field>
            </td>
          </ng-container>

          <ng-container matColumnDef="Charges">
            <th mat-header-cell *matHeaderCellDef> Charges </th>
            <td mat-cell *matCellDef="let element"> {{element.charges1}} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="openLoansColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: openLoansColumns;" class="select-row"></tr>

        </table>

        <div mat-header-cell>Saving Accounts</div>
        <table *ngIf="!showClosedSavingAccounts && isSavings" mat-table
               [dataSource]="savingAccounts|accountsFilter:'saving':'open':'isSavings'">
          <ng-container matColumnDef="Account No">
            <th mat-header-cell *matHeaderCellDef> Account No. </th>
            <td mat-cell *matCellDef="let element"> <i class="fa fa-stop" [ngClass]="element.status.code|statusLookup"></i>
              {{element.accountNo}} </td>
          </ng-container>

          <ng-container matColumnDef="Saving Account">
            <th mat-header-cell *matHeaderCellDef> Saving Account </th>
            <td mat-cell *matCellDef="let element"> {{element.productName}} </td>
          </ng-container>

          <ng-container matColumnDef="Balance">
            <th mat-header-cell *matHeaderCellDef> Balance </th>
            <td mat-cell *matCellDef="let element"> {{element.accountBalance}} </td>
          </ng-container>

          <ng-container matColumnDef="Account Type">
            <th mat-header-cell *matHeaderCellDef> Account Type </th>
            <td mat-cell *matCellDef="let element"> {{element.depositType.value}} </td>
          </ng-container>

          <ng-container matColumnDef="Type">
            <th mat-header-cell *matHeaderCellDef> Type </th>
            <td mat-cell *matCellDef="let element">
              <i class="fa fa-large" [ngClass]="(element.accountType.value=== 'Individual')?'fa-user':'fa-group'" matTooltip=" {{ element.accountType.value }}" matTooltipPosition="above"></i>
            </td>
          </ng-container>

          <ng-container matColumnDef="Deposit Amount">
            <th mat-header-cell *matHeaderCellDef> Deposit Amount </th>
            <td mat-cell *matCellDef="let element">
              <mat-form-field *ngIf="clientPaymentForm.contains('depositAmount')">
                <input matInput formControlName="depositAmount" (change)="updateAmounts()">
              </mat-form-field>
            </td>
          </ng-container>

          <ng-container matColumnDef="Charges">
            <th mat-header-cell *matHeaderCellDef> Charges </th>
            <td mat-cell *matCellDef="let element"> {{element.charges2}} </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="openSavingsColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: openSavingsColumns;"></tr>

        </table>
        <div mat-header-cell>Total Payment</div>
        <table>
          <ng-container matColumnDef="Total Payment">
            <th mat-header-cell *matHeaderCellDef> Total Payment </th>
            <td mat-cell> {{totalPaymentAmount}} </td>
          </ng-container>
        </table>

      </mat-card-content>

    </form>

  </mat-card>

</div>
